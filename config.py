"""
ÐšÐžÐÐ¤Ð˜Ð“Ð£Ð ÐÐ¦Ð˜Ð¯ Ð‘ÐžÐ¢Ð
Ð’ÑÐµ ÐºÐ¾Ð½ÑÑ‚Ð°Ð½Ñ‚Ñ‹ Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸
Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¸Ð· .env Ñ„Ð°Ð¹Ð»Ð°
"""

import os
from datetime import datetime
from dotenv import load_dotenv

# Ð—Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¸Ð· .env Ñ„Ð°Ð¹Ð»Ð°
load_dotenv()

# ============= Ð‘Ð•Ð—ÐžÐŸÐÐ¡ÐÐ«Ð• Ð”ÐÐÐÐ«Ð• Ð˜Ð— .ENV =============
# Ð¢Ð¾ÐºÐµÐ½ Ð±Ð¾Ñ‚Ð°
BOT_TOKEN = os.getenv('BOT_TOKEN')

if not BOT_TOKEN:
    raise ValueError("âŒ ÐšÐ Ð˜Ð¢Ð˜Ð§Ð•Ð¡ÐšÐÐ¯ ÐžÐ¨Ð˜Ð‘ÐšÐ: BOT_TOKEN Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ Ð² .env Ñ„Ð°Ð¹Ð»Ðµ!\n"
                     "Ð¡Ð¾Ð·Ð´Ð°Ð¹ Ñ„Ð°Ð¹Ð» .env Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ .env.example Ð¸ ÑƒÐºÐ°Ð¶Ð¸ Ñ‚Ð¾ÐºÐµÐ½.")

# ID Ð²Ð»Ð°Ð´ÐµÐ»ÑŒÑ†Ð°
try:
    OWNER_ID = int(os.getenv('OWNER_ID', '0'))
    if OWNER_ID == 0:
        raise ValueError("OWNER_ID Ð½Ðµ ÑƒÐºÐ°Ð·Ð°Ð½")
except ValueError:
    raise ValueError("âŒ ÐžÐ¨Ð˜Ð‘ÐšÐ: OWNER_ID Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ñ‡Ð¸ÑÐ»Ð¾Ð¼ (Ñ‚Ð²Ð¾Ð¹ Telegram ID)")

# Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð°Ð´Ð¼Ð¸Ð½Ñ‹ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)
ADMIN_IDS = []
admin_ids_str = os.getenv('ADMIN_IDS')
if admin_ids_str:
    try:
        ADMIN_IDS = [int(id.strip()) for id in admin_ids_str.split(',') if id.strip()]
    except ValueError:
        print("âš ï¸  ÐŸÑ€ÐµÐ´ÑƒÐ¿Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ðµ: ADMIN_IDS ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ð½ÐµÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ, Ð¸Ð³Ð½Ð¾Ñ€Ð¸Ñ€ÑƒÑŽ")

# Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð²Ð»Ð°Ð´ÐµÐ»ÑŒÑ†Ð° Ð² ÑÐ¿Ð¸ÑÐ¾Ðº Ð°Ð´Ð¼Ð¸Ð½Ð¾Ð² ÐµÑÐ»Ð¸ ÐµÐ³Ð¾ Ñ‚Ð°Ð¼ Ð½ÐµÑ‚
if OWNER_ID not in ADMIN_IDS:
    ADMIN_IDS.append(OWNER_ID)

# ============= Ð¡Ð˜Ð¡Ð¢Ð•ÐœÐ Ð ÐÐÐ“ÐžÐ’ =============
RANKS = {
    'owner': {'level': 100, 'name': 'ðŸ‘‘ Ð’Ð»Ð°Ð´ÐµÐ»ÐµÑ†', 'commands': [
        '!Ð²Ñ‹Ð³Ð¾Ð²Ð¾Ñ€', '!Ð»Ð¸ÑÑ‚', '!ÑÐ½ÑÑ‚ÑŒ Ð²Ñ‹Ð³Ð¾Ð²Ð¾Ñ€', '!ÑƒÐ±Ñ€Ð°Ñ‚ÑŒ', '!Ñ…ÐµÐ»Ð¿ÐµÑ€', 
        '!Ð¼Ð¾Ð´ÐµÑ€', '!ÐºÑƒÑ€Ð°Ñ‚Ð¾Ñ€', '!Ñ€ÑƒÐºÐ¾Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒ', '!Ð·Ð°Ð¼', '!Ð²Ð»Ð°Ð´ÐµÐ»ÐµÑ†', 
        '!ÐºÑ‚Ð¾ Ð°Ð´Ð¼Ð¸Ð½', '!ÑŽÐ±Ð¸Ð»ÐµÐ¹', '!ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ_ÑŽÐ±Ð¸Ð»ÐµÐ¹', '!ÑŽÑÐ¿Ð¸ÑÐ¾Ðº', '!ÑŽÐ¾Ñ‡Ð¸ÑÑ‚ÐºÐ°', 
        '!Ð¾Ñ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ', '!Ð¾Ñ‚Ð¿ÑƒÑÐº', '!ÑÐ±Ñ€Ð¾Ñ', '!Ð¸Ð½Ñ„Ð°', '!Ñ€Ð°Ð·Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ', '!adduser', '!Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ',
        '!Ñ…ÐµÐ»Ð¿ÐµÑ€+', '!custom', '!Ð¿Ð»ÑŽÑ', '!Ð¼Ð¸Ð½ÑƒÑ', '-Ð·Ð¿', '/addzarplata', '/zptest'
    ]},
    'curator': {'level': 90, 'name': 'ðŸ›¡ï¸ ÐšÑƒÑ€Ð°Ñ‚Ð¾Ñ€', 'commands': [
        '!Ð»Ð¸ÑÑ‚', '!Ñ…ÐµÐ»Ð¿ÐµÑ€', '!Ð¼Ð¾Ð´ÐµÑ€', '!Ñ€ÑƒÐºÐ¾Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒ', '!Ð·Ð°Ð¼', '!Ð¾Ñ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ', '!ÑÐ±Ñ€Ð¾Ñ', 
        '!Ð²Ñ‹Ð³Ð¾Ð²Ð¾Ñ€', '!ÑƒÐ±Ñ€Ð°Ñ‚ÑŒ', '!ÑÐ½ÑÑ‚ÑŒ Ð²Ñ‹Ð³Ð¾Ð²Ð¾Ñ€', '!ÐºÑ‚Ð¾ Ð°Ð´Ð¼Ð¸Ð½', '!Ð¾Ñ‚Ð¿ÑƒÑÐº', '!Ð¼Ð¾Ð¹ Ð¾Ñ‚Ð¿ÑƒÑÐº', 
        '!Ð¸Ð½Ñ„Ð°', '!Ð¼Ð¾Ð¸ Ð²Ñ‹Ð³Ð¾Ð²Ð¾Ñ€Ñ‹', '!Ð¿Ð»ÑŽÑ', '!Ð¼Ð¸Ð½ÑƒÑ', '!Ñ…ÐµÐ»Ð¿ÐµÑ€+', '!custom', '!Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ',
        '!Ð²Ð°Ñ€Ð½', '!ÑÐ½ÑÑ‚ÑŒ Ð²Ð°Ñ€Ð½', '!Ð²Ð°Ñ€Ð½Ð»Ð¸ÑÑ‚'
    ]},
    'deputy_curator': {'level': 85, 'name': 'ðŸ‘” Ð—Ð°Ð¼ ÐšÑƒÑ€Ð°Ñ‚Ð¾Ñ€Ð°', 'commands': [
        '!Ð»Ð¸ÑÑ‚', '!Ð¼Ð¾Ð¸ Ð²Ñ‹Ð³Ð¾Ð²Ð¾Ñ€Ñ‹', '!Ð¼Ð¾Ð¹ Ð¾Ñ‚Ð¿ÑƒÑÐº', '!ÐºÑ‚Ð¾ Ð°Ð´Ð¼Ð¸Ð½', '!Ð¸Ð½Ñ„Ð°', '!Ð¾Ñ‚Ð¿ÑƒÑÐº',
        '!Ð²Ñ‹Ð³Ð¾Ð²Ð¾Ñ€', '!ÑÐ½ÑÑ‚ÑŒ Ð²Ñ‹Ð³Ð¾Ð²Ð¾Ñ€', '!Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ'
    ]},
    'manager': {'level': 80, 'name': 'ðŸ‘¨â€ðŸ’¼ Ð ÑƒÐºÐ¾Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒ', 'commands': [
        '!ÐºÑ‚Ð¾ Ð°Ð´Ð¼Ð¸Ð½', '!Ð¾Ñ‚Ð¿ÑƒÑÐº', '!Ð¸Ð½Ñ„Ð°', '!Ð¼Ð¾Ð¸ Ð²Ñ‹Ð³Ð¾Ð²Ð¾Ñ€Ñ‹', '!Ð¼Ð¾Ð¹ Ð¾Ñ‚Ð¿ÑƒÑÐº',
        '!Ð²Ñ‹Ð³Ð¾Ð²Ð¾Ñ€', '!Ð»Ð¸ÑÑ‚'
    ]},
    'moder': {'level': 60, 'name': 'âš”ï¸ ÐœÐ¾Ð´ÐµÑ€', 'commands': [
        '!ÐºÑ‚Ð¾ Ð°Ð´Ð¼Ð¸Ð½', '!Ð¾Ñ‚Ð¿ÑƒÑÐº', '!Ð¸Ð½Ñ„Ð°', '!Ð¼Ð¾Ð¸ Ð²Ñ‹Ð³Ð¾Ð²Ð¾Ñ€Ñ‹', '!Ð¼Ð¾Ð¹ Ð¾Ñ‚Ð¿ÑƒÑÐº',
        '!Ð²Ñ‹Ð³Ð¾Ð²Ð¾Ñ€', '!Ð»Ð¸ÑÑ‚', '!Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ'
    ]},
    'custom': {'level': 50, 'name': 'ðŸ’Ž Custom', 'commands': [
        '!ÐºÑ‚Ð¾ Ð°Ð´Ð¼Ð¸Ð½', '!Ð¾Ñ‚Ð¿ÑƒÑÐº', '!Ð¸Ð½Ñ„Ð°', '!Ð¼Ð¾Ð¸ Ð²Ñ‹Ð³Ð¾Ð²Ð¾Ñ€Ñ‹', '!Ð¼Ð¾Ð¹ Ð¾Ñ‚Ð¿ÑƒÑÐº'
    ]},
    'helper_plus': {'level': 45, 'name': 'âœ¨ Ð¥ÐµÐ»Ð¿ÐµÑ€+', 'commands': [
        '!ÐºÑ‚Ð¾ Ð°Ð´Ð¼Ð¸Ð½', '!Ð¾Ñ‚Ð¿ÑƒÑÐº', '!Ð¸Ð½Ñ„Ð°', '!Ð¼Ð¾Ð¸ Ð²Ñ‹Ð³Ð¾Ð²Ð¾Ñ€Ñ‹', '!Ð¼Ð¾Ð¹ Ð¾Ñ‚Ð¿ÑƒÑÐº'
    ]},
    'helper': {'level': 40, 'name': 'ðŸ‘‹ Ð¥ÐµÐ»Ð¿ÐµÑ€', 'commands': [
        '!Ð¼Ð¾Ð¸ Ð²Ñ‹Ð³Ð¾Ð²Ð¾Ñ€Ñ‹', '!Ð¾Ñ‚Ð¿ÑƒÑÐº', '!Ð¸Ð½Ñ„Ð°', '!ÐºÑ‚Ð¾ Ð°Ð´Ð¼Ð¸Ð½', '!Ð¼Ð¾Ð¹ Ð¾Ñ‚Ð¿ÑƒÑÐº'
    ]},
    'user': {'level': 0, 'name': 'ðŸ‘¤ Ð£Ñ‡Ð°ÑÑ‚Ð½Ð¸Ðº', 'commands': [
        '!Ð½Ð¸Ðº', '!Ð¾Ñ‚Ð¿ÑƒÑÐº', '!Ð¸Ð½Ñ„Ð°', '!Ð¼Ð¾Ð¸ Ð²Ñ‹Ð³Ð¾Ð²Ð¾Ñ€Ñ‹', '!Ð¼Ð¾Ð¹ Ð¾Ñ‚Ð¿ÑƒÑÐº', '!ÐºÑ‚Ð¾ Ð°Ð´Ð¼Ð¸Ð½'
    ]}
}

# ============= ÐÐÐ¡Ð¢Ð ÐžÐ™ÐšÐ˜ ÐÐ’Ð¢Ðž-Ð’ÐÐ ÐÐžÐ’ =============
AUTO_WARN_SETTINGS = {
    'enabled_topics': [],  # ID Ñ‚ÐµÐ¼ Ð³Ð´Ðµ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¾
    'whitelist_users': [],  # ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸ Ð² Ð±ÐµÐ»Ð¾Ð¼ ÑÐ¿Ð¸ÑÐºÐµ
    'warn_message': "âš ï¸ ÐÐµÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð°Ñ Ð¿Ð¾Ð´Ð°Ñ‡Ð°. (Ð¡Ð¼. Ð·Ð°ÐºÑ€ÐµÐ¿Ð»Ñ‘Ð½Ð½Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ)",
    'max_warnings': 3,  # ÐœÐ°ÐºÑÐ¸Ð¼ÑƒÐ¼ Ð²Ð°Ñ€Ð½Ð¾Ð² Ð´Ð¾ Ð²Ñ‹Ð³Ð¾Ð²Ð¾Ñ€Ð°
    'reset_days': 30  # Ð§ÐµÑ€ÐµÐ· ÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð´Ð½ÐµÐ¹ ÑÐ±Ñ€Ð°ÑÑ‹Ð²Ð°ÑŽÑ‚ÑÑ Ð²Ð°Ñ€Ð½Ñ‹
}

# ============= Ð’Ð Ð•ÐœÐ•ÐÐÐ«Ð• ÐŸÐ•Ð Ð˜ÐžÐ”Ð« Ð”Ð›Ð¯ Ð¡Ð¢ÐÐ¢Ð˜Ð¡Ð¢Ð˜ÐšÐ˜ =============
TIME_PERIODS = {
    '1_day': 1,
    '10_days': 10,
    '30_days': 30,
    'all_time': 0  # 0 = Ð²ÑÑ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°
}

# ============= ÐÐÐ¡Ð¢Ð ÐžÐ™ÐšÐ˜ ÐŸÐ Ð˜Ð’Ð•Ð¢Ð¡Ð¢Ð’Ð˜Ð™ =============
WELCOME_MESSAGES = {
    'enabled': True,
    'default_message': "ðŸ‘‹ Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ, {user_name}!\n\n"
                       "âœ… ÐÐ°Ð¿Ð¸ÑˆÐ¸ !Ð½Ð¸Ðº (ÑÐ²Ð¾Ð¹ Ð½Ð¸Ðº ÐºÐ°Ðº Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ)\n"
                       "ðŸ§ ÐžÐ·Ð½Ð°ÐºÐ¾Ð¼ÑŒÑÑ Ñ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð°Ð¼Ð¸ Ð¸ Ð¾Ð±ÑÐ·Ð°Ð½Ð½Ð¾ÑÑ‚ÑÐ¼Ð¸\n"
                       "ðŸ“– ÐžÐ±Ñ€Ð°Ñ‚Ð¸ Ð²Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ Ð½Ð° Ð·Ð°ÐºÑ€ÐµÐ¿Ð»Ñ‘Ð½Ð½Ñ‹Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð² Ñ‚ÐµÐ¼Ð°Ñ…",
    'chats': {}  # chat_id: ÐºÐ°ÑÑ‚Ð¾Ð¼Ð½Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ
}

# ============= ÐÐÐ¡Ð¢Ð ÐžÐ™ÐšÐ˜ Ð—ÐÐ ÐŸÐ›ÐÐ¢ =============
SALARY_SETTINGS = {
    'payment_day': 30,  # Ð’Ñ‹Ð¿Ð»Ð°Ñ‚Ð° ÐºÐ°Ð¶Ð´Ñ‹Ðµ 30 Ð´Ð½ÐµÐ¹
    'punishment_value': 10,  # 1 Ð½Ð°ÐºÐ°Ð·Ð°Ð½Ð¸Ðµ = 10 HC
    'currency': 'HC',  # ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð²Ð°Ð»ÑŽÑ‚Ñ‹
    'min_activity': 50  # ÐœÐ¸Ð½Ð¸Ð¼ÑƒÐ¼ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ Ð´Ð»Ñ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð·Ð°Ñ€Ð¿Ð»Ð°Ñ‚Ñ‹
}

# ============= ÐÐÐ¡Ð¢Ð ÐžÐ™ÐšÐ˜ Ð‘Ð­ÐšÐÐŸÐžÐ’ =============
BACKUP_SETTINGS = {
    'enabled': True,
    'time': '03:00',  # Ð’Ñ€ÐµÐ¼Ñ Ð±ÑÐºÐ°Ð¿Ð°
    'keep_days': 7  # Ð¥Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð±ÑÐºÐ°Ð¿Ñ‹ 7 Ð´Ð½ÐµÐ¹
}

# ============= Ð›ÐžÐ“Ð˜Ð ÐžÐ’ÐÐÐ˜Ð• =============
LOG_LEVEL = 'INFO'  # DEBUG, INFO, WARNING, ERROR
LOG_FORMAT = '%(asctime)s - %(name)s - %(levelname)s - %(message)s'

# ============= ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ Ð—ÐÐ“Ð Ð£Ð—ÐšÐ˜ =============
print("âœ… ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð°!")
print(f"   Ð’Ð»Ð°Ð´ÐµÐ»ÐµÑ†: {OWNER_ID}")
print(f"   Ð’ÑÐµÐ³Ð¾ Ð°Ð´Ð¼Ð¸Ð½Ð¾Ð²: {len(ADMIN_IDS)}")
print(f"   Ð¢Ð¾ÐºÐµÐ½: {BOT_TOKEN[:10]}...{BOT_TOKEN[-5:] if len(BOT_TOKEN) > 15 else ''}")